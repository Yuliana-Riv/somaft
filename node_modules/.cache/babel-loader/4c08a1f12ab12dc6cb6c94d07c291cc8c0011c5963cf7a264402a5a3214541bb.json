{"ast":null,"code":"import { mapActions } from 'vuex';\nimport AddCss from './addCss.vue';\nimport EditCss from './editCss.vue';\nexport default {\n  name: 'casas',\n  components: {\n    AddCss,\n    EditCss\n  },\n  data() {\n    return {\n      status: '',\n      message: '',\n      item: '',\n      search_value: '',\n      updsearchcli: '',\n      currentPage: 1,\n      itemsPerPage: 12,\n      active: false,\n      viewModal: false,\n      itemDel: '',\n      radius: false\n    };\n  },\n  async created() {\n    await this.getIdentity();\n    if (this.identity.role == 'colaborador') {\n      this.getInfoByIdCss({\n        id: this.identity.sub,\n        option: \"casas/colaborador\"\n      });\n    } else {\n      this.getAllInfoCss('casas');\n    }\n    /*this.getAllInfoCss('casas') */\n  },\n\n  computed: {\n    identity() {\n      return this.$store.getters[\"admin/getIdentity\"];\n    },\n    data() {\n      let data = this.$store.getters[\"casas/data\"];\n      if (!Array.isArray(data)) return [];\n      if (this.search_value != '') {\n        let filt = data.filter(item => this.includesItem(this.search_value, item.name));\n        data = filt;\n      }\n      return data;\n    },\n    historyOption() {\n      return this.$store.getters[\"casas/getHistoryOption\"];\n    },\n    //Paginacion\n    allItems() {\n      return Object.keys(this.data).map(pid => this.data[pid]);\n    },\n    filteredItems() {\n      return this.allItems.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);\n    },\n    totalPages() {\n      let total = Math.ceil(this.allItems.length / this.itemsPerPage);\n      if (total < this.currentPage) {\n        this.currentPage = 1;\n      }\n      return total;\n    }\n  },\n  methods: {\n    ...mapActions('casas', ['getAllInfoCss']),\n    ...mapActions('casas', ['setHistoryOptionCss']),\n    ...mapActions('casas', ['setAddedCss']),\n    ...mapActions('casas', ['getInfoByIdCss']),\n    getIdentity: async function () {\n      let response = await this.$store.dispatch(\"admin/getData\");\n      return response;\n    },\n    includesItem(search, name) {\n      name = name.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n      if (search == '') {\n        return true;\n      }\n      name = name.toLowerCase();\n      search = search.toLowerCase();\n      if (search == '') {\n        return false;\n      }\n      return name.includes(search);\n    },\n    changeView(option, item) {\n      this.item = item;\n      this.setAddedCss(item);\n      this.setHistoryOptionCss(option);\n    },\n    activeRadius() {\n      this.radius ? this.radius = false : this.radius = true;\n    },\n    showModal: function (id) {\n      this.itemDel = id;\n      this.viewModal = true;\n    },\n    closeModal: function () {\n      this.viewModal = false;\n      this.itemDel = '';\n    },\n    wait: function () {\n      setTimeout(() => this.$router.go(), 200);\n    },\n    delStatus: function () {\n      setTimeout(() => this.delMsgs(), 2000);\n      setTimeout(() => this.wait(), 500);\n    },\n    delMsgs: function () {\n      this.status = \"\";\n      this.message = \"\";\n    },\n    eliminar: async function () {\n      let id = this.itemDel;\n      this.status = '';\n      this.message = '';\n      let result = await this.$store.dispatch(\"casas/deleteItemCss\", {\n        option: 'casas',\n        id: id\n      });\n      if (result.status == 'error') {\n        this.message = result.message;\n        this.status = 'error';\n        this.delStatus();\n      } else {\n        this.status = '';\n        this.message = '';\n        this.wait();\n      }\n    },\n    closeSelect() {\n      document.getElementById(\"select-ch\").checked = false;\n      this.active = false;\n    },\n    // botones de paginacion.\n    next() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    prev() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AA6KA;AACA;AACA;AACA;EACAA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IAEA;EACA;EACA;IACA;IACA;MAEA;QACAC;QACAC;MACA;IACA;MACA;IACA;IACA;EACA;;EAEAC;IACAC;MACA;IACA;IACAf;MACA;MAEA;MAEA;QACA;QACAA;MACA;MAEA;IACA;IACAgB;MACA;IACA;IAGA;IACAC;MACA;IACA;IACAC;MAEA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;IACA;EACA;EACAC;IAEA;IACA;IACA;IACA;IAEAC;MACA;MACA;IACA;IACAC;MACA1B;MACA;QACA;MACA;MACAA;MACA2B;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACAC;IACA;IAEAC;MACAD,iCACA;MACAA,8BACA;IAEA;IACAE;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MAEA;QAAAnB;QAAAD;MAAA;MAEA;QACA;QACA;QACA;MAEA;QACA;QACA;QACA;MACA;IACA;IACAqB;MACAC;MACA;IACA;IAUA;IACAC;MAEA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;IACA;EAGA;AACA","names":["name","components","AddCss","EditCss","data","status","message","item","search_value","updsearchcli","currentPage","itemsPerPage","active","viewModal","itemDel","radius","id","option","computed","identity","historyOption","allItems","filteredItems","totalPages","methods","getIdentity","includesItem","search","changeView","activeRadius","showModal","closeModal","wait","setTimeout","delStatus","delMsgs","eliminar","closeSelect","document","next","prev"],"sourceRoot":"src/views/casas","sources":["casas.vue"],"sourcesContent":["<template>\r\n    <div id=\"casas\">\r\n           \r\n             <div v-if=\"historyOption =='Default'\">\r\n            \r\n                   <div class=\"dflx\">\r\n                        <p class=\"noitems\">No. de items <span > {{data.length}}</span>  </p>\r\n                         \r\n        <div class=\"select-container\">\r\n          <input type=\"checkbox\" name=\"select-ch\" id=\"select-ch\" v-model=\"active\" true-value=\"true\" false-value=\"false\"/>\r\n          <label for=\"select-ch\">\r\n            <div id=\"select-items\" :class=\"{'rounded' : active}\">\r\n                Items por página: {{itemsPerPage}}\r\n            </div>\r\n          </label>\r\n          <div class=\"options-cont\" @click=\"closeSelect()\">\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"6\"\r\n              @click=\"itemsPerPage = '6'\"\r\n            >\r\n              6\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"12\"\r\n              @click=\"itemsPerPage = '12'\"\r\n            >\r\n              12\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"18\"\r\n              @click=\"itemsPerPage = '18'\"\r\n            >\r\n              18\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"24\"\r\n              @click=\"itemsPerPage = '24'\"\r\n            >\r\n              24\r\n            </div>\r\n          </div>\r\n        </div>\r\n                         <div class=\"buscador dflx\">\r\n                              <input v-model=\"search_value\" type=\"search\" id=\"input-search\" class=\"form-control\" :placeholder=\"'Búsqueda'\"  />\r\n                              <div class=\"icon_buscar\">\r\n                              <img  src=\"../../assets/default/Search.png\" alt=\"icono buscar\">\r\n                              </div>\r\n\r\n                        </div>\r\n\r\n\r\n\r\n\r\n\r\n                   </div>\r\n\r\n                     <div  @click=\"changeView('Add','')\"  class=\"btn_añadir dflx\">\r\n                                <p  > AGREGAR</p>  <img src=\"../../assets/default/add.png\" alt=\"\">\r\n                     </div>\r\n\r\n\r\n                       <div class=\"tbl_usuarios\">\r\n            <div class=\"tbl_header dflx\">\r\n                <div class=\"tblh tblrad\">\r\n                    <p>TITULO</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                    <p>ESTADO</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                   <p>COLABORADOR</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                  <p>TIPO</p>\r\n                </div>\r\n                 <div class=\"tblh2 \" v-if=\"identity.role !='colaborador'\">\r\n                   \r\n                    <p>EDITAR</p>\r\n                </div>\r\n                 <div class=\"tblh2  tblh2r \" v-if=\"identity.role !='colaborador'\">\r\n                    <p>BORRAR</p>\r\n                   \r\n                </div>\r\n                 \r\n            </div>\r\n          \r\n            <div tbl_content>\r\n                <div  v-if=\"data.length>0\">\r\n                    <div class=\"tbl_items dflx\" v-for=\"(item, key) in filteredItems\" :key=\"key\">\r\n                        <div class=\"tbl_item \">\r\n                            <p>{{item.titulo}}</p>\r\n                        </div>\r\n                        <div class=\"tbl_item \">\r\n                            <p><span v-if=\"item.estatus=='INACTIVO'\">oculto</span> <span v-else>visible</span> </p>\r\n                        </div>\r\n                        <div class=\"tbl_item \">\r\n                               <p>{{item.colb_fullname}}</p>\r\n                        </div>\r\n                        <div class=\"tbl_item \">\r\n                               <p>{{item.tipo}}</p>\r\n                        </div>\r\n                     \r\n                       <section v-if=\"identity.role !='colaborador'\" >\r\n                            <div class=\"icon_editar\" >\r\n                                <img   @click=\"changeView('Edit',item)\" src=\"../../assets/default/i_editar.png\" alt=\"icono editar\"   >\r\n                            </div>\r\n                            <div class=\"icon_eliminar\" >\r\n                                <img  @click=\"showModal(item.id)\" src=\"../../assets/default/i_eliminar.png\" alt=\"icono eliminar\" >\r\n                            </div>                        \r\n                       </section>\r\n\r\n                        \r\n                    </div>\r\n                </div>  \r\n                <div v-else>\r\n                    <p class=\"snu\">Aun no hay registros.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div  id=\"navigate-buttons\" class=\"mlf\">\r\n                    <div class=\"dflx\">\r\n                        <button @click=\"prev\" id=\"btn-prev\" class=\"btn-navigate  \"><img src=\"../../assets/default/Left.png\" alt=\"icono anterior\"></button>\r\n                        <p class=\"num-pages\">{{currentPage}} / {{totalPages}}</p>\r\n                        <button @click=\"next\"  id=\"btn-next\" class=\"btn-navigate  \"><img src=\"../../assets/default/Right.png\" alt=\"icono siguiente\"></button>\r\n                     </div>\r\n        </div>\r\n\r\n\r\n\r\n             </div>\r\n             <div v-if=\"historyOption =='Add'\">\r\n                 <!-- Agregar casas -->\r\n                 <AddCss/>\r\n             </div>\r\n             <div v-if=\"historyOption =='Edit'\">\r\n               <!-- Editar casas -->\r\n               <EditCss/>\r\n             </div>\r\n         \r\n\r\n\r\n             <div v-if=\"status !=''\" class=\"status_messages\">\r\n                            <div v-if=\"status =='success'\" class=\"msg msg_success\">\r\n                                 <p>{{message}}</p>\r\n                            </div>\r\n                            <div  v-if=\"status =='error'\" class=\"msg msg_error\">\r\n                                <p>{{message}}</p>\r\n                            </div>\r\n        </div>\r\n\r\n         \r\n           <div v-if=\"viewModal\" class=\"modal_view\">\r\n           \r\n            <div id=\"modal_delete\">\r\n                <div class=\"body\">\r\n                     <img src=\"../../assets/default/alert.png\" alt=\"icono alerta\">\r\n            <h3 >¿Estás seguro de  <span>eliminar <br> esta casa?</span></h3>\r\n                </div>\r\n           \r\n            <div class=\"modal_del_btns dflx\">\r\n                <p @click=\"eliminar()\">Aceptar</p>   <p  @click=\"closeModal()\" >Cancelar</p>\r\n            </div>\r\n          </div>\r\n        </div> \r\n      \r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapActions} from 'vuex';\r\nimport AddCss from './addCss.vue'\r\nimport EditCss from './editCss.vue'\r\nexport default {\r\n  name: 'casas',\r\n  components:{\r\n   AddCss,\r\n   EditCss \r\n  },\r\n    data(){\r\n       return{\r\n        \r\n           status:'',\r\n           message:'',\r\n           item: '',\r\n           search_value:'',\r\n           updsearchcli:'',\r\n           currentPage: 1,\r\n           itemsPerPage:   12,\r\n           active:false,\r\n           viewModal:false,\r\n           itemDel:'',\r\n           radius:false\r\n\r\n       }\r\n   },\r\n  async created() {\r\n    await this.getIdentity(); \r\n   if(this.identity.role =='colaborador'){\r\n   \r\n      this.getInfoByIdCss({\r\n            id: this.identity.sub,\r\n            option:\"casas/colaborador\"\r\n          });\r\n    }else{\r\n      this.getAllInfoCss('casas')\r\n    } \r\n    /*this.getAllInfoCss('casas') */\r\n  },\r\n  \r\n  computed:{\r\n    identity() {\r\n        return this.$store.getters[\"admin/getIdentity\"];\r\n      },\r\n     data() {\r\n          let data = this.$store.getters[\"casas/data\"];\r\n\r\n          if(!Array.isArray(data)) return []\r\n\r\n          if(this.search_value !=''){\r\n            let filt = data.filter(item => this.includesItem(this.search_value, item.name) )\r\n            data = filt\r\n          }\r\n\r\n          return data\r\n      },\r\n         historyOption(){\r\n            return this.$store.getters[\"casas/getHistoryOption\"]\r\n        },\r\n\r\n        \r\n          //Paginacion\r\n        allItems () {\r\n            return Object.keys(this.data).map(pid => this.data[pid])\r\n        },\r\n        filteredItems () {\r\n        \r\n             return  this.allItems.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage )\r\n        },\r\n        totalPages () {\r\n            let total = Math.ceil(this.allItems.length / this.itemsPerPage)\r\n                if(total < this.currentPage){\r\n                this.currentPage =1\r\n                }\r\n        return total\r\n       },\r\n  },\r\n  methods:{\r\n        \r\n       ...mapActions('casas', ['getAllInfoCss']),\r\n           ...mapActions('casas', ['setHistoryOptionCss']),\r\n         ...mapActions('casas', ['setAddedCss']),\r\n         ...mapActions('casas',['getInfoByIdCss']),\r\n\r\n         getIdentity: async function () {\r\n      let response = await this.$store.dispatch(\"admin/getData\");\r\n      return response;\r\n    },\r\n         includesItem(search, name){\r\n            name = name.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\r\n          if(search ==''){\r\n            return true\r\n          }\r\n          name = name.toLowerCase()\r\n          search= search.toLowerCase()\r\n          if(search ==''){\r\n              return false;\r\n          }\r\n          return name.includes(search)\r\n        },\r\n           changeView(option, item){\r\n             this.item=item\r\n             this.setAddedCss(item)\r\n             this.setHistoryOptionCss(option)\r\n         },\r\n\r\n         activeRadius(){\r\n             this.radius? this.radius =false:  this.radius =true;\r\n         },\r\n\r\n         showModal: function(id){\r\n             this.itemDel =id;\r\n             this.viewModal=true\r\n         },\r\n         closeModal:function(){\r\n             this.viewModal=false;\r\n             this.itemDel =''\r\n         },\r\n\r\n           wait: function(){\r\n            setTimeout(() => this.$router.go(), 200);\r\n        },\r\n\r\n          delStatus: function () {\r\n            setTimeout(() => this.delMsgs()\r\n            ,2000);\r\n            setTimeout(() => this.wait()\r\n            ,500);\r\n            \r\n        },\r\n        delMsgs: function(){\r\n            this.status=\"\"\r\n            this.message=\"\"\r\n        },\r\n\r\n        eliminar: async function(){\r\n            let id = this.itemDel\r\n            this.status='';\r\n            this.message='';\r\n\r\n             let result = await this.$store.dispatch(\"casas/deleteItemCss\", {option: 'casas', id:id});\r\n           \r\n            if(result.status=='error'){\r\n            this.message = result.message;\r\n            this.status='error'\r\n            this.delStatus()\r\n           \r\n            }else{\r\n                this.status='';\r\n                this.message='';\r\n                this.wait()\r\n            }\r\n         },\r\n          closeSelect(){\r\n      document.getElementById(\"select-ch\").checked = false;\r\n      this.active = false;\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n      \r\n\r\n\r\n         // botones de paginacion.\r\n         next () {\r\n          \r\n          if ( this.currentPage < this.totalPages) {\r\n            this.currentPage++\r\n          }\r\n        },\r\n        prev () {\r\n          if (this.currentPage > 1) {\r\n            this.currentPage--\r\n          }\r\n        },\r\n\r\n\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n.tbl_usuarios{\r\n      margin-top: 1.9791666666666665VW;\r\n         width: 48.4VW;\r\n}\r\n\r\n.tbl_items{\r\n      border-bottom: 1px solid var(--color-3);\r\n}\r\n\r\n.tbl_item{\r\n    overflow: auto;\r\n}\r\n      .tblh{\r\n            width: 10.78125VW;\r\n            height: 2.5VW;\r\n            background: var(--color-2);\r\n            border-right: 1px solid  var(--color-5);\r\n           \r\n      }\r\n       .tblh2{\r\n            width: 2.5VW;\r\n            height: 2.5VW;\r\n            background: var(--color-3);\r\n            border-right: 1px solid  var(--color-5);\r\n           \r\n      }\r\n      .tblh p{\r\n             padding-left: 1.3541666666666667VW;\r\n             color: var(--color-5);\r\n             font-size: 0.7291666666666666VW;\r\n             font-weight: 500;\r\n      }\r\n      .tblh2 p{\r\n             padding-top: 0.5VW;\r\n             padding-left: .3vw;\r\n             color: var(--color-5);\r\n             font-size: 0.46875VW;\r\n             font-weight: 700;\r\n      }\r\n\r\n       .icon_editar , .icon_eliminar{\r\n            width: 2.5VW;\r\n            height: 2.5VW; \r\n            \r\n      }\r\n\r\n       .icon_editar img , .icon_eliminar img{\r\n       \r\n             width:  0.8333333333333334VW;\r\n            height:   0.8333333333333334VW; \r\n            padding-top: .9vw;\r\n            padding-left: .9vw;\r\n            cursor: pointer;\r\n      }\r\n      .tblrad{\r\n            border-radius: 1.5vw 0vw 0vw 1.5vw;\r\n      }\r\n\r\n      .tblh2r{\r\n            border-radius:  0vw .5vw .5vw 0vw ;\r\n      }\r\n\r\n      .tbl_item{\r\n             width: 10.78125VW;\r\n      } .tbl_item p{\r\n             padding-left: 1.3541666666666667VW;\r\n      }\r\n\r\n      .mlf{\r\n          margin-left: 43VW !important;\r\n      }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}